# This is the service's name
service_name: "template"
service_port: 5000

# Type can be normal or king_of_the_hill
type: normal

# All paths relative from `service` directory
public_files:
  - /src/template.py
  - /src/config.py

# Patch policy
patch_policy:
  # Analysis strategy (currently only `tracing`)
  strategy: tracing
  # Maximum number of changed bytes across all files
  max_bytes: 5
  # Path whitelist, relative to `service` directory
  whitelist:
    - /src/service.c

# All paths relative to the `services` docker container
flag_location:
  - /flag

# Score file, only used for king_of_the_hill services
score_location:
  - /score

authors:
  - adamd
  - reyammer
description: "This is a template service."

# Directories for the next two are relative to the `interactions` docker container

# Exploit scripts must output the flag using "FLAG: <FLAG>" and exit with 0 if the flag was captured correctly. 
exploit_scripts:
  - /exploit1.py
  - /exploit2.sh

# SLA scripts are run every tick against the service.
# This means that SLA traffic will be included in the PCAP dumps to teams
# Exit with 0 if the service is correct, anything else if it is not.
# If you want to surface an error message on patch submission, output "ERROR: <ERROR MESSAGE>"
sla_scripts:
  - /check1.py
  - /check2.sh

# Test scripts are optional.
# If you have test scripts, they will be used on patch validation, so they can do hard-core service assessment.
# Will not be run on real services in production.
# If you want to surface an error message on patch submission, output "ERROR: <ERROR MESSAGE>"
# If you do not include test_scripts, the sla_scripts will be used to validate patches
test_scripts:
  - /check1.py
  - /check2.sh



# Service executables and invocation environments
# nullptr's infrastructure needs this to know how to launch (and trace) the target program.
# This may be complicated to get right: ping nullptr if you have doubts / issues.
executables:
  # Path is relative to the `service`
  - path: /service_exe1
    # Invocation assumes that CWD is `service`
    arguments: ["./service_exe1", "arg1", "arg2"]
    environment:
      key1: value1
      key2: value2
  - path: /service_exe2
    arguments: ["./service_exe2", "arg1", "arg2"]
    environment:
      key1: value1
      key2: value2
